<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page Title -->
  <title>Info - Weekly Wonder</title>

  <!-- SEO Description -->
  <meta name="description" content="Creative technologist building interactive experiences. From Tumblr customization to creative tech experiments.">

  <!-- Social Media Preview (Open Graph) -->
  <meta property="og:title" content="About - Weekly Wonder">
  <meta property="og:description" content="Creative technologist. Interactive art enthusiast. Building the playful internet.">
  <meta property="og:image" content="https://weeklywonder.org/preview.png">
  <meta property="og:url" content="https://weeklywonder.org/info.html">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="About - Weekly Wonder">
  <meta name="twitter:description" content="Creative technologist. Interactive art enthusiast. Building the playful internet.">
  <meta name="twitter:image" content="https://weeklywonder.org/preview.png">

  <!-- Favicon (all sizes) -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com;
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data: blob: https:;
                 frame-src https://open.spotify.com;
                 connect-src 'self';
                 media-src 'self' blob:;">
  <meta name="referrer" content="no-referrer">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">

  <link rel="stylesheet" href="style.css?v=4" />

  <!-- Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="info-page">
  <div class="desktop">
    <!-- MAIN COLUMN -->
    <main class="main-col" style="width: 100%; max-width: none;">
      <!-- SEARCH BAR -->
      <div class="search-bar">
        <span class="search-icon">⌕</span>
        <input type="text" placeholder="Search Weekly Wonder..." />
      </div>

      <!-- TOP NAV -->
      <nav class="top-nav" aria-label="Primary">
        <a class="nav-link" href="index.html">Weekly Wonder</a>
        <div class="nav-link-wrapper">
          <a class="nav-link" href="tools.html" id="toolsLink">Tools</a>
          <div class="tools-dropdown" id="toolsDropdown">
            <a href="tools.html#idMe" class="dropdown-item">ID Me</a>
            <a href="tools.html#ascii" class="dropdown-item">ASCII</a>
            <a href="tools.html#crossStitch" class="dropdown-item">Cross stitch</a>
          </div>
        </div>
        <a class="nav-link is-active" href="info.html">Info / Contact</a>
      </nav>

      <!-- INFO VIEW -->
      <section class="view is-active" id="infoView">
        <div class="info-scroll-container">

          <!-- Mac-style Camera Permission Popup -->
          <div class="camera-popup-overlay" id="cameraPopup">
            <div class="camera-popup-window">
              <div class="window-header drag-handle">
                <span class="dot red" id="closePopup"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span class="window-title">Camera permissions</span>
              </div>
              <div class="window-body camera-popup-body">
                <p class="popup-message">Camera enables interactive features.<br>
                Give a thumbs up to explore items, or just use your mouse.</p>

                <div class="popup-buttons">
                  <button id="enableCameraBtn" class="btn camera-choice-btn">Enable Camera</button>
                  <button id="disableCameraBtn" class="btn camera-choice-btn">Camera off</button>
                </div>

                <p class="popup-disclaimer">Runs locally in your browser. Nothing is recorded or stored. You can keep camera off.</p>
              </div>
            </div>
          </div>

          <!-- SECTION 1: HERO -->
          <section class="info-hero-section">
            <h1 class="hero-title">
              HI, I'M<br>
              GABRIELLA
            </h1>

            <div class="hero-boxes">
              <!-- Left Box: Video switcher -->
              <div class="hero-box hero-box-left" id="videoBox">
                <video id="heroVideo1" class="hero-video active" autoplay loop muted playsinline preload="auto">
                  <source src="images/3d me.mp4" type="video/mp4">
                </video>
                <video id="heroVideo2" class="hero-video" loop muted playsinline preload="none">
                  <source src="images/3dd me.mp4" type="video/mp4">
                </video>
              </div>

              <!-- Right Box: About text -->
              <div class="hero-box hero-box-right">
                <p>I rediscovered creative tech recently after some time away. Those hours customizing Tumblr? They were teaching me more than I realized. So I merged my love for tech with Weekly Wonder into something people could actually use and play with. I'm drawn to interactive art the kind that asks you to participate. That's what I'm building here. If you get excited about new tools, art, music and just trying things out, you're exactly where you should be</p>
              </div>
            </div>
          </section>

          <!-- SECTION 2: INTERACTIVE -->
          <section class="info-interactive-section">

            <!-- Left Side: Camera + Weekly Wonder + Moire -->
            <div class="interactive-left">

              <!-- Camera Settings Button -->
              <button id="reopenPopup" class="reopen-camera-btn-new">
                Camera Settings
              </button>

              <!-- Moire Effect -->
              <div class="moire-effect-info">
                <img src="images/ascii-me.png" class="moire-img base" alt="">
                <img src="images/ascii-me-2.png" class="moire-img moire-overlay" alt="">
              </div>

              <!-- Contact Circles - Under Moire -->
              <div class="contact-circles">
                <a href="mailto:lyayb99@gmail.com" class="contact-circle">
                  <span>Email</span>
                </a>
                <a href="https://www.instagram.com/lyayb/" target="_blank" rel="noopener noreferrer" class="contact-circle">
                  <span>IG</span>
                </a>
                <a href="https://www.speakpipe.com/Weeklywonder" target="_blank" rel="noopener noreferrer" class="contact-circle">
                  <span>Hotline</span>
                </a>
              </div>

            </div>

            <!-- Right Side: Interactive Folder -->
            <div class="interactive-right">

              <div class="brain-box" id="folderBox">
                <h2 class="brain-title" id="interactiveTitle">THIS IS AN<br>INTERACTIVE SPACE</h2>

                <!-- STATE 1: Closed Folder -->
                <div class="folder-container" id="folderContainer">
                  <img src="images/folder.png" alt="Folder" class="folder-image" id="folderImage" />
                </div>

                <!-- STATE 2: Open Carousel -->
                <div class="carousel-container" id="carouselContainer">
                  <div class="carousel-orbit">
                    <div class="carousel-item" data-index="0">
                      <img src="images/forks.png" alt="Forks" />
                    </div>
                    <div class="carousel-item" data-index="1">
                      <img src="images/jacket.png" alt="Jacket" />
                    </div>
                    <div class="carousel-item" data-index="2">
                      <img src="images/compact.png" alt="Compact" />
                    </div>
                    <div class="carousel-item" data-index="3">
                      <img src="images/book.jpg" alt="Book" />
                    </div>
                    <div class="carousel-item" data-index="4">
                      <img src="images/cdwheel.png" alt="CD Wheel" />
                    </div>
                  </div>
                </div>

              </div>

            </div>

          </section>

        </div>
      </section>
    </main>

    <!-- Tiny Player (Spotify Embed, Global) -->
    <section class="tiny-player" id="tinyPlayer" aria-label="Tiny Player">
      <div class="tiny-header drag-handle" id="tinyHeader">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <span class="tiny-title">Tiny Player</span>
        <button class="tiny-close" id="closePlayer" aria-label="Close">×</button>
      </div>

      <div class="tiny-body tiny-spotify">
        <iframe
          id="spotifyFrame"
          src="https://open.spotify.com/embed/playlist/02AUgwn97fU0N7oasxqzr0?utm_source=generator&theme=0"
          width="100%"
          height="120"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy">
        </iframe>
      </div>
    </section>

  </div>

  <!-- Hidden video for MediaPipe -->
  <video id="cameraVideo" style="position:absolute; opacity:0; pointer-events:none; width:1px; height:1px;"></video>

  <!-- MediaPipe Hands CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>

  <!-- Tiny Player Drag -->
  <script>
    const tinyPlayer = document.getElementById("tinyPlayer");
    const tinyHeader = document.getElementById("tinyHeader");

    if (tinyPlayer && tinyHeader) {
      let isDragging = false;
      let startX = 0;
      let startY = 0;

      tinyHeader.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX - tinyPlayer.offsetLeft;
        startY = e.clientY - tinyPlayer.offsetTop;
        document.body.style.userSelect = "none";
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        tinyPlayer.style.left = e.clientX - startX + "px";
        tinyPlayer.style.top = e.clientY - startY + "px";
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
        document.body.style.userSelect = "";
      });
    }
  </script>

  <!-- Camera Popup Logic -->
  <script>
    // Camera popup show/hide logic
    (function() {
      const popup = document.getElementById('cameraPopup');
      const closeBtn = document.getElementById('closePopup');
      const enableBtn = document.getElementById('enableCameraBtn');
      const disableBtn = document.getElementById('disableCameraBtn');
      const reopenBtn = document.getElementById('reopenPopup');

      // Check if user has made a choice before
      const cameraChoice = localStorage.getItem('cameraChoice');

      if (cameraChoice) {
        // User has made a choice before, hide popup and show reopen button
        popup.classList.add('hidden');
        reopenBtn.style.display = 'block';
      }

      // Close popup (red X button)
      closeBtn.addEventListener('click', () => {
        popup.classList.add('hidden');
        reopenBtn.style.display = 'block';
      });

      // Reopen popup
      reopenBtn.addEventListener('click', () => {
        popup.classList.remove('hidden');
        reopenBtn.style.display = 'none';
      });

      // Enable camera button
      enableBtn.addEventListener('click', () => {
        localStorage.setItem('cameraChoice', 'enabled');
        popup.classList.add('hidden');
        reopenBtn.style.display = 'block';
        // Trigger camera enable (will be handled by MediaPipe script)
        window.dispatchEvent(new CustomEvent('enableCamera'));
      });

      // Disable camera button
      disableBtn.addEventListener('click', () => {
        localStorage.setItem('cameraChoice', 'disabled');
        popup.classList.add('hidden');
        reopenBtn.style.display = 'block';
        // Trigger camera disable (will be handled by MediaPipe script)
        window.dispatchEvent(new CustomEvent('disableCamera'));
      });
    })();
  </script>

  <!-- Moire Effect Script -->
  <script>
    // Simple moire effect on mousemove
    (function() {
      const moireContainer = document.querySelector('.moire-effect-info');
      const moireOverlay = moireContainer ? moireContainer.querySelector('.moire-overlay') : null;

      if (moireOverlay && moireContainer) {
        moireContainer.addEventListener('mousemove', (e) => {
          const rect = moireContainer.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;

          const offsetX = (x / rect.width - 0.5) * 20;
          const offsetY = (y / rect.height - 0.5) * 20;

          moireOverlay.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
        });

        moireContainer.addEventListener('mouseleave', () => {
          moireOverlay.style.transform = 'translate(0, 0)';
        });
      }
    })();
  </script>

  <!-- Folder & Carousel Interaction Script -->
  <script>
    (function() {
      const folderContainer = document.getElementById('folderContainer');
      const carouselContainer = document.getElementById('carouselContainer');
      const interactiveTitle = document.getElementById('interactiveTitle');
      const carouselItems = document.querySelectorAll('.carousel-item');

      let isCarouselOpen = false;
      let rotationAngle = 0;
      let animationFrameId = null;
      let pointerX = null;
      let pointerY = null;
      let highlightedItem = null;
      let isPaused = false;
      let targetRotationSpeed = 0.0003; // Target rotation speed (slower)
      let currentRotationSpeed = 0.0003; // Current rotation speed (for smooth deceleration)

      // Make radius responsive based on container size
      function getRadius() {
        const containerWidth = carouselContainer.offsetWidth;
        const containerHeight = carouselContainer.offsetHeight;
        const smallerDimension = Math.min(containerWidth, containerHeight);
        return Math.max(80, Math.floor(smallerDimension * 0.35)); // 35% of container, min 80px
      }

      const baseRotationSpeed = 0.0003; // Radians per millisecond (slower rotation)
      const proximityThreshold = 140; // Distance to trigger highlight

      // Item names mapping
      const itemNames = {
        0: '005 cutlery from niceworkshop.net',
        1: 'Betsey Johnson Alley Cat Wool Plaid Coat',
        2: '1940s Sterling silver compact case',
        3: 'The Creative Habit by Twyla Tharp',
        4: 'CD ferris wheel rack'
      };

      // Open carousel when folder is clicked
      if (folderContainer) {
        folderContainer.addEventListener('click', openCarousel);
      }

      function openCarousel() {
        if (isCarouselOpen) return;

        isCarouselOpen = true;

        // Change title
        interactiveTitle.innerHTML = 'My current favs<br><span style="font-size: 16px; font-weight: 400; opacity: 0.7;">These are some items that I\'m loving</span>';

        // Fade out folder
        folderContainer.classList.add('hidden');

        // Show carousel after folder fades
        setTimeout(() => {
          folderContainer.style.display = 'none';
          carouselContainer.classList.add('active');
          startCarousel();
        }, 500);
      }

      function startCarousel() {
        let lastTime = performance.now();

        function animate(currentTime) {
          const deltaTime = currentTime - lastTime;
          lastTime = currentTime;

          // Smooth rotation speed transition (deceleration/acceleration)
          const speedDiff = targetRotationSpeed - currentRotationSpeed;
          currentRotationSpeed += speedDiff * 0.1; // Smooth interpolation

          // Update rotation angle (only if not paused)
          if (!isPaused) {
            rotationAngle += currentRotationSpeed * deltaTime;
          }

          // Get dynamic radius based on container size
          const radius = getRadius();

          // Check for item proximity if pointer exists
          let closestItem = null;
          let closestDistance = Infinity;

          if (pointerX !== null && pointerY !== null) {
            const orbitRect = carouselContainer.getBoundingClientRect();
            const centerX = orbitRect.width / 2;
            const centerY = orbitRect.height / 2;

            carouselItems.forEach((item, index) => {
              const baseAngle = rotationAngle + (index * (Math.PI * 2 / 5));
              const itemX = centerX + Math.cos(baseAngle) * radius;
              const itemY = centerY + Math.sin(baseAngle) * radius;

              const dx = pointerX - itemX;
              const dy = pointerY - itemY;
              const distance = Math.sqrt(dx * dx + dy * dy);

              if (distance < closestDistance) {
                closestDistance = distance;
                closestItem = item;
              }
            });

            // Highlight if within threshold
            if (closestDistance < proximityThreshold) {
              highlightItem(closestItem);
            } else {
              unhighlightAll();
            }
          } else {
            unhighlightAll();
          }

          // Position each item in orbit
          carouselItems.forEach((item, index) => {
            const baseAngle = rotationAngle + (index * (Math.PI * 2 / 5));
            let x = Math.cos(baseAngle) * radius;
            let y = Math.sin(baseAngle) * radius;

            // Get item image size for proper centering
            const img = item.querySelector('img');
            const imgWidth = img ? img.offsetWidth : 90;
            const imgHeight = img ? img.offsetHeight : 90;
            const offset = Math.max(imgWidth, imgHeight) / 2;

            // If this item is highlighted, center it
            if (item.classList.contains('highlighted')) {
              item.style.transform = `translate(-${offset}px, -${offset}px) scale(1.6)`;
            } else {
              item.style.transform = `translate(${x - offset}px, ${y - offset}px)`;
            }
          });

          animationFrameId = requestAnimationFrame(animate);
        }

        animationFrameId = requestAnimationFrame(animate);
      }

      function highlightItem(item) {
        if (highlightedItem === item) return;

        // Unhighlight previous item
        if (highlightedItem) {
          highlightedItem.classList.remove('highlighted');
          const prevLabel = highlightedItem.querySelector('.item-label');
          if (prevLabel) prevLabel.remove();
        }

        // Highlight new item
        item.classList.add('highlighted');
        highlightedItem = item;

        // Pause carousel
        isPaused = true;
        targetRotationSpeed = 0;

        // Fade other items
        carouselItems.forEach(otherItem => {
          if (otherItem !== item) {
            otherItem.classList.add('faded');
          } else {
            otherItem.classList.remove('faded');
          }
        });

        // Show item name
        const itemIndex = parseInt(item.dataset.index);
        const itemName = itemNames[itemIndex];
        const label = document.createElement('div');
        label.className = 'item-label';
        label.textContent = itemName;
        item.appendChild(label);
      }

      function unhighlightAll() {
        if (!highlightedItem) return;

        // Remove highlight
        carouselItems.forEach(item => {
          item.classList.remove('highlighted', 'faded');
          const label = item.querySelector('.item-label');
          if (label) label.remove();
        });

        highlightedItem = null;
        isPaused = false;
        targetRotationSpeed = baseRotationSpeed;
      }

      // Mouse hover interaction (fallback when camera off)
      carouselContainer.addEventListener('mousemove', (e) => {
        const rect = carouselContainer.getBoundingClientRect();
        pointerX = e.clientX - rect.left;
        pointerY = e.clientY - rect.top;
      });

      carouselContainer.addEventListener('mouseleave', () => {
        pointerX = null;
        pointerY = null;
      });

      // Hand tracking - thumbs up gesture (MediaPipe)
      window.addEventListener('thumbsUpPosition', (e) => {
        if (isCarouselOpen && e.detail) {
          const rect = carouselContainer.getBoundingClientRect();
          const screenX = e.detail.x * window.innerWidth;
          const screenY = e.detail.y * window.innerHeight;
          pointerX = screenX - rect.left;
          pointerY = screenY - rect.top;
        }
      });

      window.addEventListener('thumbsUpLost', () => {
        pointerX = null;
        pointerY = null;
      });

      window.addEventListener('handLost', () => {
        pointerX = null;
        pointerY = null;
      });

      // Cleanup on page unload
      window.addEventListener('beforeunload', () => {
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
        }
      });

    })();
  </script>

  <!-- Typing Effect for Hero Title -->
  <script>
    (function() {
      // Check if typing effect has already been played
      if (sessionStorage.getItem('typingEffectPlayed')) {
        return; // Don't play again
      }

      const heroTitle = document.querySelector('.hero-title');
      if (!heroTitle) return;

      // Hide the original text
      heroTitle.style.opacity = '0';

      // Wait a moment before starting
      setTimeout(() => {
        const line1 = "HI, I'M";
        const line2 = "GABRIELLA";

        // Clear and create structure for typing
        heroTitle.innerHTML = '<span id="typeLine1"></span><br><span id="typeLine2"></span>';
        heroTitle.style.opacity = '1';

        const line1Element = document.getElementById('typeLine1');
        const line2Element = document.getElementById('typeLine2');

        let index1 = 0;
        let index2 = 0;

        function typeLine1() {
          if (index1 < line1.length) {
            line1Element.textContent += line1[index1];
            index1++;
            setTimeout(typeLine1, 80);
          } else {
            // Start line 2 after a brief pause
            setTimeout(typeLine2, 200);
          }
        }

        function typeLine2() {
          if (index2 < line2.length) {
            line2Element.textContent += line2[index2];
            index2++;
            setTimeout(typeLine2, 80);
          } else {
            // Mark as played for this session
            sessionStorage.setItem('typingEffectPlayed', 'true');
          }
        }

        // Start typing
        typeLine1();
      }, 300);
    })();
  </script>

  <!-- Tiny Player drag functionality -->
  <script src="weekly-feed.js"></script>

  <!-- MediaPipe Hand Detection Logic -->
  <script src="info-mediapipe.js?v=3"></script>
</body>
</html>
